<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ZebraPlugin</title>
    <style>
        .example {border: 1px dotted gray; padding: 1em; display: inline-block}
        figure {text-align: center; display: inline-block}
        figure > p {display: inline-block; width: 100px; height: 100px}
        figcaption {text-align: center; font-family: monospace}
        figure + figure {margin-left: 0}
        .code-string {font-family: monospace}
        .clickable * {cursor: pointer}
        label > input {display: none}
        .switch {color: orangered; font-weight: bold}
    </style>
</head>
<body>
<div>
    <div class="example">
        <figure>
            <p id="skew"></p>
            <figcaption>straightGaps: false</figcaption>
        </figure>
        <figure>
            <p id="straight"></p>
            <figcaption>straightGaps: true</figcaption>
        </figure>
    </div>
</div>
<div>
    <div class="example">
        <p class="code-string clickable">
            <label>
                <input type="checkbox" onclick="toggleHighlight(this)" checked>
                highlightActive: <span id="highlightStatus" class="switch">true</span>
            </label>
        </p>
        <p class="code-string clickable">
            <label>
                <input type="checkbox" onclick="toggleRun(this)" checked>
                run: <span id="runStatus" class="switch">true</span>
            </label>
        </p>
        <p class="code-string">
            value: <span id="value" class="value"></span>
        </p>
        <figure>
            <p id="highlight"></p>
            <figcaption></figcaption>
        </figure>
    </div>
</div>
</body>
<script type="module">
    import ZebraLoader from "../../src/common/zebra-loader.js";
    import ArrowPlugin from "../../src/plugins/arrow.js";
    ZebraLoader.register('pointer', ArrowPlugin);

    window.zebraSkew = new ZebraLoader('#skew', {
        run: false,
        geometry: {
            innerRadius: 0.5,
            margin: 1
        },
        norma: 6,
        pushPlugins: ['pointer'],
        construct: {
            zebra: {
                highlightActive: false,
                straightGaps: false
            },
            pointer: {
                radius: -0,
                color: 'darkred',
                sizes: {stick: 20},
                spin: {
                    degree: 120,
                    around: (s, o, {A}) => ({
                        x: A.x - 2,
                        y: A.y - 2
                    })
                }
            }
        }
    });

    window.zebraStraight = new ZebraLoader('#straight', {
        run: false,
        geometry: {
            innerRadius: 0.5,
            margin: 1
        },
        norma: 6,
        pushPlugins: ['pointer'],
        construct: {
            zebra: {
                highlightActive: false,
                straightGaps: true
            },
            pointer: {
                radius: -0,
                color: 'darkred',
                sizes: {stick: 20},
                spin: {
                    degree: 120,
                    around: (s, o, {A}) => ({
                        x: A.x - 2,
                        y: A.y - 2
                    })
                }
            }
        }
    });

    window.zebraHighlight = new ZebraLoader({
        selector: '#highlight'
    });

    const highlightStatus = document.getElementById('highlightStatus');
    window.toggleHighlight = function(checkbox) {
        window.zebraHighlight.remake({
            construct: {
                zebra: {
                    highlightActive: checkbox.checked
                }
            }
        });
        highlightStatus.innerText = checkbox.checked;
    };

    const runStatus = document.getElementById('runStatus');
    window.toggleRun = function(checkbox) {
        window.zebraHighlight[checkbox.checked ? 'start' : 'stop']();
        runStatus.innerText = checkbox.checked;
    };

    const value = document.getElementById('value');
    setInterval(() => {
        value.innerText = window.zebraHighlight.value;
    }, 100);
</script>
</html>